-- Kiá»ƒm tra ID game
if game.PlaceId ~= 14476003462 then
    return warn("Script only works in the specified game (ID: 14476003462){PETAPETA | Level6 (ç„¡é™æ—…é¤¨)}")
end

-- ThÃ´ng bÃ¡o khi Ä‘Ãºng ID game
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "âœ“ Game Check Passed",
    Text = "Script is now executing...",
    Duration = 5
})

task.wait(1) -- Äá»£i 1s trÆ°á»›c khi thá»±c thi 

task.spawn(function()         
local Players = game:GetService("Players")
local lp = Players.LocalPlayer

-- Danh sÃ¡ch ban: [UserId] = "YYYY-MM-DD HH:MM" (UTC+7)
local bannedUsers = {
    [8863729721] = "2025-08-15 12:00",
}

--[[
    []  = "YYYY-MM-DD 14:30"
yyyy lÃ  nÄƒm
mm lÃ  thÃ¡ng
dd lÃ  ngÃ y
]]

-- Chuyá»ƒn chuá»—i "YYYY-MM-DD HH:MM" thÃ nh timestamp
local function parseDateTime(str)
    local y, m, d, hh, mm = str:match("(%d+)%-(%d+)%-(%d+) (%d+):(%d+)")
    return os.time({
        year = tonumber(y),
        month = tonumber(m),
        day = tonumber(d),
        hour = tonumber(hh),
        min = tonumber(mm),
        sec = 0
    })
end

-- Láº¥y thá»i gian hiá»‡n táº¡i UTC+7
local function getTimeUTC7()
    local now = os.date("!*t") -- UTC
    now.hour = now.hour + 7
    if now.hour >= 24 then
        now.hour = now.hour - 24
        now.day = now.day + 1
    elseif now.hour < 0 then
        now.hour = now.hour + 24
        now.day = now.day - 1
    end
    return os.time(now)
end

-- Kiá»ƒm tra ban
local banTimeStr = bannedUsers[lp.UserId]
if banTimeStr then
    local nowTime = getTimeUTC7()
    local banTime = parseDateTime(banTimeStr)
    if nowTime < banTime then
        lp:Kick("You has been banned by script\nYou can play again after: " .. banTimeStr .. " UTC+7")
    end
end
end)

task.spawn(function()         
local Players = game:GetService("Players")
local lp = Players.LocalPlayer

-- Danh sÃ¡ch ban: [UserId] = "YYYY-MM-DD HH:MM" (UTC+7)
local bannedUsers = {
    [6180249904] = "2025-08-15 15:50",
}

--[[
    []  = "YYYY-MM-DD 14:30"
yyyy lÃ  nÄƒm
mm lÃ  thÃ¡ng
dd lÃ  ngÃ y
]]

-- Chuyá»ƒn chuá»—i "YYYY-MM-DD HH:MM" thÃ nh timestamp
local function parseDateTime(str)
    local y, m, d, hh, mm = str:match("(%d+)%-(%d+)%-(%d+) (%d+):(%d+)")
    return os.time({
        year = tonumber(y),
        month = tonumber(m),
        day = tonumber(d),
        hour = tonumber(hh),
        min = tonumber(mm),
        sec = 0
    })
end

-- Láº¥y thá»i gian hiá»‡n táº¡i UTC+7
local function getTimeUTC7()
    local now = os.date("!*t") -- UTC
    now.hour = now.hour + 7
    if now.hour >= 24 then
        now.hour = now.hour - 24
        now.day = now.day + 1
    elseif now.hour < 0 then
        now.hour = now.hour + 24
        now.day = now.day - 1
    end
    return os.time(now)
end

-- Kiá»ƒm tra ban
local banTimeStr = bannedUsers[lp.UserId]
if banTimeStr then
    local nowTime = getTimeUTC7()
    local banTime = parseDateTime(banTimeStr)
    if nowTime < banTime then
        lp:Kick("GiÃ³ cmm bá»›t spam request\nYou can play again after: " .. banTimeStr .. " UTC+7")
    end
end
end)

task.spawn(function()
print("----    ---- ----    ----    ------    ----    ---- ------------ ") print("****   ****  ****    ****   ********   *****   **** ************ ") print("----  ----   ----    ----  ----------  ------  ---- ----         ") print("*********    ************ ****    **** ************ ****  ****** ") print("---------    ------------ ------------ ------------ ----  ------ ") print("****  ****   ****    **** ************ ****  ****** ****    **** ") print("----   ----  ----    ---- ----    ---- ----   ----- ------------ ") print("****    **** ****    **** ****    **** ****    **** ************ ")                                                                  
end)

task.spawn(function()
-- Khai bÃ¡o cÃ¡c dá»‹ch vá»¥ cáº§n thiáº¿t
local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local camera = workspace.CurrentCamera

-- Táº£i vÃ  khá»Ÿi táº¡o thÆ° viá»‡n GUI Rayfield
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Táº¡o cá»­a sá»• giao diá»‡n chÃ­nh
local Window = Rayfield:CreateWindow({
    Name = "Script By IgnahK [PETAPETA {ç„¡é™æ—…é¤¨}]",
    LoadingTitle = "Loading Script...",
    LoadingSubtitle = "Please wait",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "MyHubFolder",
        FileName = "MyHubConfig"
    },
    Discord = {
        Enabled = false,
        Invite = "",
        RememberJoins = false
    },
    KeySystem = false,
})

-- ThÃ´ng bÃ¡o Ä‘Ã£ táº£i
Rayfield:Notify({
    Title = "Welcome!",
    Content = "Script Loaded",
    Duration = 2
})


-- Táº¡o hÃ m ESP chung
local function autoESP(filterFn, color, labelText)
	task.spawn(function()
		while true do
			for _, obj in ipairs(workspace:GetDescendants()) do
				if filterFn(obj) then
					if not obj:FindFirstChild("AutoESP") then
						local hl = Instance.new("Highlight")
						hl.Name = "AutoESP"
						hl.OutlineColor = color
						hl.OutlineTransparency = 0
						hl.FillTransparency = 1
						hl.Parent = obj
					end
					if not obj:FindFirstChild("ESPLabel") and obj:IsA("BasePart") then
						local bill = Instance.new("BillboardGui", obj)
						bill.Name = "ESPLabel"
						bill.Size = UDim2.new(0, 100, 0, 40)
						bill.StudsOffset = Vector3.new(0, 2, 0)
						bill.AlwaysOnTop = true
						local txt = Instance.new("TextLabel", bill)
						txt.Size = UDim2.new(1, 0, 1, 0)
						txt.BackgroundTransparency = 1
						txt.TextColor3 = color
						txt.TextStrokeTransparency = 0.5
						txt.Text = labelText or obj.Name
						txt.Font = Enum.Font.Bodoni
						txt.TextScaled = true
					end
				end
			end
			task.wait(5)
		end
	end)
end
--[[ -- example
mainTab:CreateButton({
	Name = "Esp Box",
	Callback = function()
		autoESP(function(p)
			return p:IsA("BasePart") and p.Name == "BoxBottom"
		end, Color3.fromRGB(0, 255, 0), "Box")
	end,
})
]]

-- Tab chÃ­nh
local V1 = Window:CreateTab("Visual [Chapter 1]", "eye")

-- ESP Buttons
V1:CreateButton({
	Name = "Esp PetaPeta",
	Callback = function()
	task.spawn(function()
	local espColor = Color3.fromRGB(255, 133, 145) -- MÃ u chá»¯ + Highlight
	local outlineColor = Color3.fromRGB(0, 0, 0)   -- Viá»n chá»¯ + viá»n highlight

	local function createESP(item)
		if item:FindFirstChild("EnemyESP") or item:FindFirstChild("ESPHighlight") then return end

		-- BillboardGui
		local billboard = Instance.new("BillboardGui")
		billboard.Name = "EnemyESP"
		billboard.AlwaysOnTop = true
		billboard.Size = UDim2.new(0, 100, 0, 40)
		billboard.StudsOffset = Vector3.new(0, 2, 0)
		billboard.MaxDistance = math.huge
		billboard.Parent = item

		local textLabel = Instance.new("TextLabel")
		textLabel.Parent = billboard
		textLabel.Text = "Peta Peta"
		textLabel.TextColor3 = espColor
		textLabel.TextStrokeColor3 = outlineColor
		textLabel.TextStrokeTransparency = 0
		textLabel.BackgroundTransparency = 1
		textLabel.Size = UDim2.new(1, 0, 1, 0)
		textLabel.Font = Enum.Font.Bodoni
		textLabel.TextScaled = true

		-- Highlight
		local hl = Instance.new("Highlight")
		hl.Name = "ESPHighlight"
		hl.FillColor = espColor
		hl.FillTransparency = 0.5
		hl.OutlineColor = outlineColor
		hl.OutlineTransparency = 0
		hl.Adornee = item
		hl.Parent = item
	end

	local function isEnemyModel(model)
		return model:IsA("Model") and (model.Name == "EnemyModel" or model.Name == "EnemyModel_Stage6")
	end

	local function checkExisting()
		for _, item in ipairs(workspace:GetDescendants()) do
			if isEnemyModel(item) then
				createESP(item)
			end
		end
	end

	workspace.DescendantAdded:Connect(function(descendant)
		if isEnemyModel(descendant) then
			createESP(descendant)
		end
	end)

	checkExisting()
end)
task.spawn(function()
local SoundService = game:GetService("SoundService")

local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://3165700530" -- Ä‘á»•i ID tÃ¹y Ã½
sound.Volume = 1
sound.Looped = false
sound.Name = "Alert"
sound.Parent = SoundService

sound:Play()

    task.spawn(function()
	local StarterGui = game:GetService("StarterGui")
	local Workspace = game:GetService("Workspace")
	local SoundService = game:GetService("SoundService")

	task.wait(0.5)

	pcall(function()
		StarterGui:SetCore("SendNotification", {
			Title = "PETAPETA Notice",
			Text = "Loadingâ€¦",
			Duration = 5,
			Icon = "rbxassetid://83439791036389",
		})
	end)

	local alertSound = Instance.new("Sound")
	alertSound.Name = "EnemyAlert"
	alertSound.SoundId = "rbxassetid://3165700530"
	alertSound.Volume = 1
	alertSound.Parent = SoundService

	local function sendNotice(text)
		pcall(function()
			StarterGui:SetCore("SendNotification", {
				Title = "Notice",
				Text = text,
				Duration = 5,
				Icon = "rbxassetid://83439791036389",
			})
		end)
	end

	local enemyModels = {} -- Danh sÃ¡ch Ä‘ang tá»“n táº¡i
	local enemyDetected = false

	local function countEnemies()
		local count = 0
		for obj in pairs(enemyModels) do
			if obj:IsDescendantOf(Workspace) then
				count += 1
			end
		end
		return count
	end

	local function monitorEnemy(model)
		if enemyModels[model] then return end
		enemyModels[model] = true

		if not enemyDetected then
			enemyDetected = true
			alertSound:Play()
			sendNotice("Hide or die ?, Except Ofuda")
		end

		local conn
		conn = model.AncestryChanged:Connect(function(_, parent)
			if not parent then
				enemyModels[model] = nil
				conn:Disconnect()

				if countEnemies() == 0 then
					enemyDetected = false
					sendNotice("PETAPETA-Sama disappeared")
				end
			end
		end)
	end

	-- QuÃ©t ban Ä‘áº§u
	for _, obj in ipairs(Workspace:GetDescendants()) do
		if obj:IsA("Model") and obj.Name == "EnemyModel" then
			monitorEnemy(obj)
		end
	end

	-- Theo dÃµi spawn má»›i
	Workspace.DescendantAdded:Connect(function(obj)
		if obj:IsA("Model") and obj.Name == "EnemyModel" then
			monitorEnemy(obj)
		end
	end)
end)
end)
	end,
})


local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local Camera = Workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

local activeESPList = {}
local espObjects = {}

-- âš™ï¸ Danh sÃ¡ch cÃ¡c nhÃ³m ESP
local espGroups = {
	{
		label = "Safe",
		objects = {
			["Meshes/safe_Safe"] = {label = "Safe", color = Color3.fromRGB(255, 255, 0)},
			DialShelf = {label = "Safe", color = Color3.fromRGB(240,240,240)},
		}
	},
	{
		label = "Box",
		objects = {
			BoxBottom = {label = "Box", color = Color3.fromRGB(0,255,0)}
		}
	},
	-- ThÃªm cÃ¡c nhÃ³m khÃ¡c á»Ÿ Ä‘Ã¢y náº¿u muá»‘n...
 	{
		label = "Doll",
		objects = {
			DollBlackHead = {label = "Doll", color = Color3.fromRGB(255,255,255)},
			DollHead = {label = "Doll", color = Color3.fromRGB(245,245,245)}
		}
	},
	{
		label = "Key",
		objects = {
			Key = {label = "Key", color = Color3.fromRGB(150, 150, 150)}
		}
	},
	{
		label = "Lighter",
		objects = {
			Lighter = {label = "Lighter", color = Color3.fromRGB(84, 220, 0)}
		}
	},
	{
		label = "Plate",
		objects = {
			Dish = {label = "Plate", color = Color3.fromRGB(255, 223, 178)}
		}
	},
	{
		label = "SafeCode",
		objects = {
			HintPaper = {label = "SafeCode", color = Color3.fromRGB(0,255,255)},
			TelevisionW = {label = "SafeCode", color = Color3.fromRGB(0,255,255)},
   TelevisionN = {label = "SafeCode", color = Color3.fromRGB(0,255,255)}
		}
	},
	{
		label = "Room (Stage 5)",
		objects = {
			["dirty sheet"] = {label = "Room", color = Color3.fromRGB(255,105,0)}
		}
	},
{
		label = "Chase end (Stage 6)",
		objects = {
	 	["FallingTansu"] = {label = "", color = Color3.fromRGB(255,255,255)},
			
			["1st_3"] = {label = "", color = Color3.fromRGB(255,255,255)},
			["1st_4"] = {label = "", color = Color3.fromRGB(255,255,255)},
			["1st_5"] = {label = "", color = Color3.fromRGB(255,255,255)},
			["1st_6"] = {label = "", color = Color3.fromRGB(255,255,255)},
		}
	},
	{
		label = "Candle",
		objects = {
			KeyCandle1 = {label = "Candle1", color = Color3.fromRGB(179, 0, 56)},
			KeyCandle2 = {label = "Candle2", color = Color3.fromRGB(179, 0, 56)},
			KeyCandle3 = {label = "Candle3", color = Color3.fromRGB(179, 0, 56)},
			Keycandle4 = {label = "Candle4", color = Color3.fromRGB(179, 0, 56)}
		}
	},
}

-- ðŸ§± Táº¡o Billboard ESP
local function createESP(item, text, color)
	if espObjects[item] then return end

	local part = item:IsA("Model") and (item.PrimaryPart or item:FindFirstChildWhichIsA("BasePart")) or item
	if not part or not part:IsA("BasePart") then return end

	-- Billboard ESP
	local gui = Instance.new("BillboardGui")
	gui.Name = "ItemESP"
	gui.AlwaysOnTop = true
	gui.Size = UDim2.new(0, 100, 0, 40)
	gui.StudsOffset = Vector3.new(0, 2, 0)
	gui.MaxDistance = 500
	gui.Adornee = part
	gui.Parent = part

	local label = Instance.new("TextLabel", gui)
	label.BackgroundTransparency = 1
	label.Size = UDim2.new(1, 0, 1, 0)
	label.Text = text
	label.TextColor3 = color
	label.Font = Enum.Font.Bodoni
	label.TextStrokeColor3 = Color3.new(0, 0, 0)
	label.TextStrokeTransparency = 0
	label.TextSize = 20

	-- Highlight (Outline)
	local hl = Instance.new("Highlight")
	hl.Adornee = item:IsA("Model") and item or part
	hl.FillColor = Color3.new(0, 0, 0)
	hl.FillTransparency = 1 -- chá»‰ viá»n ngoÃ i
	hl.OutlineColor = color
	hl.OutlineTransparency = 0
	hl.Parent = part

	espObjects[item] = {gui = gui, label = label, highlight = hl}
end

-- ðŸ—‘ï¸ XoÃ¡ ESP
local function removeESP(item)
	local data = espObjects[item]
	if data then
		if data.gui then data.gui:Destroy() end
		if data.highlight then data.highlight:Destroy() end
		espObjects[item] = nil
	end
end

-- ðŸ” Cáº­p nháº­t TextSize theo khoáº£ng cÃ¡ch
RunService.RenderStepped:Connect(function()
	for item, data in pairs(espObjects) do
		local name = item.Name
		local found = false
		for _, group in ipairs(espGroups) do
			if activeESPList[group.label] and group.objects[name] then
				local pos = (item:IsA("Model") and item:GetPivot().Position) or (item:IsA("BasePart") and item.Position)
				local dist = (Camera.CFrame.Position - pos).Magnitude
				data.label.TextSize = math.clamp(25 * (1 - dist / 200), 10, 25)
				found = true
				break
			end
		end
		if not found then
			removeESP(item)
		end
	end
end)

-- ðŸ‘ï¸ Theo dÃµi object má»›i Ä‘Æ°á»£c thÃªm
Workspace.DescendantAdded:Connect(function(obj)
	local name = obj.Name
	for _, group in ipairs(espGroups) do
		if activeESPList[group.label] and group.objects[name] then
			task.wait(0.05)
			createESP(obj, group.objects[name].label, group.objects[name].color)
		end
	end
end)

-- ðŸ”˜ Táº¡o toggle riÃªng cho tá»«ng nhÃ³m
for _, group in ipairs(espGroups) do
	V1:CreateToggle({
		Name = "ESP: " .. group.label,
		CurrentValue = false,
		Callback = function(state)
			activeESPList[group.label] = state

			if not state then
				for obj in pairs(espObjects) do
					if group.objects[obj.Name] then
						removeESP(obj)
					end
				end
			else
				for _, obj in ipairs(Workspace:GetDescendants()) do
					if group.objects[obj.Name] and not espObjects[obj] then
						createESP(obj, group.objects[obj.Name].label, group.objects[obj.Name].color)
					end
				end
			end
		end
	})
end



V1:CreateButton({
    Name = "Esp Player",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/idtkby/Xd/main/PlayerEsp"))()
    end,
})







local V2 = Window:CreateTab("Visual [Chapter 2]", "eye")
V2:CreateSection("Soon...")
V2:CreateParagraph({
	Title = "bro",
	Content = "Chapter 2 of peta is currently not updated by omochi studio, so there is no chapter 2 map for me to write script, so please do not send any related requests.",
})













local KTab = Window:CreateTab("Misc", "package")
KTab:CreateSection("Game")

local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local AutoPickupRunning = false
local PickupConnection
local ItemList = {}

local targetNames = {
	["KeyCandle1"] = true,
	["KeyCandle2"] = true,
	["KeyCandle3"] = true,
	["KeyCandle4"] = true,
	["Dish"] = true,
	["Lighter"] = true,
 ["Rope"] = true,
	["Key"] = true,
	["OldPhoto"] = true,
 ["DollBlue"] = true,
 ["DollWhite"] = true,
 ["DollYellow"] = true,
 ["DollRed"] = true,
	["DollBlackHead"] = false,
 ["FireExtinguisher"] = true,
 ["BoxBottom"] = true,
 ["Ofuda"] = true,
}

KTab:CreateToggle({
	Name = "Auto pick up items",
	CurrentValue = false,
	Callback = function(state)
		AutoPickupRunning = state
		if state then
			local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
			local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
			local lastTriggerTime = {}

			local function scanItems()
				ItemList = {}
				for _, obj in ipairs(workspace:GetDescendants()) do
					if (obj:IsA("ProximityPrompt") or obj:IsA("ClickDetector") or obj.Name == "TouchInterest") then
						local model = obj:FindFirstAncestorWhichIsA("Model")
						if model then
							for _, part in ipairs(model:GetDescendants()) do
								if part:IsA("BasePart") and targetNames[part.Name] then
									table.insert(ItemList, {model = model, obj = obj})
									break
								end
							end
						end
					end
				end
			end

			scanItems()

			workspace.DescendantAdded:Connect(function(desc)
				if not AutoPickupRunning then return end
				if (desc:IsA("ProximityPrompt") or desc:IsA("ClickDetector") or desc.Name == "TouchInterest") then
					local model = desc:FindFirstAncestorWhichIsA("Model")
					if model then
						for _, part in ipairs(model:GetDescendants()) do
							if part:IsA("BasePart") and targetNames[part.Name] then
								table.insert(ItemList, {model = model, obj = desc})
								break
							end
						end
					end
				end
			end)

			local function triggerPrompt(obj)
				pcall(function()
					if obj:IsA("ProximityPrompt") then
						fireproximityprompt(obj, math.huge)
					elseif obj:IsA("ClickDetector") then
						fireclickdetector(obj)
					elseif obj:IsA("TouchTransmitter") or obj.Name == "TouchInterest" then
						firetouchinterest(HumanoidRootPart, obj.Parent, 0)
						task.wait()
						firetouchinterest(HumanoidRootPart, obj.Parent, 1)
					end
				end)
			end

			local function getClosestPart(model, refPos)
				local closest, minDist = nil, math.huge
				for _, part in ipairs(model:GetDescendants()) do
					if part:IsA("BasePart") then
						local dist = (part.Position - refPos).Magnitude
						if dist < minDist then
							minDist = dist
							closest = part
						end
					end
				end
				return closest, minDist
			end

			PickupConnection = RunService.Heartbeat:Connect(function()
				if not AutoPickupRunning or not LocalPlayer.Character then return end
				local HRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
				if not HRP then return end

				local now = tick()
				for i = #ItemList, 1, -1 do
					local data = ItemList[i]
					local model = data.model
					local obj = data.obj
					if not model or not model:IsDescendantOf(workspace) then
						table.remove(ItemList, i)
						continue
					end

					if lastTriggerTime[model] and now - lastTriggerTime[model] < 2 then
						continue
					end

					local _, dist = getClosestPart(model, HRP.Position)
					if dist and dist <= 7 then
						lastTriggerTime[model] = now
						triggerPrompt(obj)
					end
				end
			end)
		else
			if PickupConnection then
				PickupConnection:Disconnect()
				PickupConnection = nil
			end
			ItemList = {}
		end
	end
})

local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local AutoZeniRunning = false
local ZeniConnection
local ZeniList = {}

KTab:CreateToggle({
	Name = "Auto Collect Zeni",
	CurrentValue = false,
	Callback = function(state)
		AutoZeniRunning = state
		if state then
			local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
			local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
			local lastTriggerTime = {}

			-- Cáº­p nháº­t danh sÃ¡ch Zeni khi cÃ³ object má»›i vÃ o Workspace
			local function scanZeni()
				ZeniList = {}
				for _, obj in ipairs(workspace:GetDescendants()) do
					if (obj:IsA("ProximityPrompt") or obj:IsA("ClickDetector") or obj.Name == "TouchInterest") and not obj:IsDescendantOf(LocalPlayer.Character) then
						local model = obj:FindFirstAncestorWhichIsA("Model")
						if model and model.Name:match("^Zeni_[1-3]$") then
							table.insert(ZeniList, {model = model, obj = obj})
						end
					end
				end
			end

			scanZeni()
			workspace.DescendantAdded:Connect(function(desc)
				if AutoZeniRunning and (desc:IsA("ProximityPrompt") or desc:IsA("ClickDetector") or desc.Name == "TouchInterest") then
					local model = desc:FindFirstAncestorWhichIsA("Model")
					if model and model.Name:match("^Zeni_[1-3]$") then
						table.insert(ZeniList, {model = model, obj = desc})
					end
				end
			end)

			local function triggerPrompt(obj)
				pcall(function()
					if obj:IsA("ProximityPrompt") then
						fireproximityprompt(obj, math.huge)
					elseif obj:IsA("ClickDetector") then
						fireclickdetector(obj)
					elseif obj:IsA("TouchTransmitter") or obj.Name == "TouchInterest" then
						firetouchinterest(HumanoidRootPart, obj.Parent, 0)
						task.wait()
						firetouchinterest(HumanoidRootPart, obj.Parent, 1)
					end
				end)
			end

			local function getClosestPart(model, refPos)
				local closest, minDist = nil, math.huge
				for _, part in ipairs(model:GetChildren()) do
					if part:IsA("BasePart") then
						local dist = (part.Position - refPos).Magnitude
						if dist < minDist then
							minDist = dist
							closest = part
						end
					end
				end
				return closest, minDist
			end

			ZeniConnection = RunService.Heartbeat:Connect(function()
				if not AutoZeniRunning or not LocalPlayer.Character then return end
				local HRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
				if not HRP then return end

				local now = tick()
				for i = #ZeniList, 1, -1 do
					local data = ZeniList[i]
					local model = data.model
					local obj = data.obj
					if not model or not model:IsDescendantOf(workspace) then
						table.remove(ZeniList, i)
						continue
					end

					if lastTriggerTime[model] and now - lastTriggerTime[model] < 2 then
						continue
					end

					local _, dist = getClosestPart(model, HRP.Position)
					if dist and dist <= 7 then
						lastTriggerTime[model] = now
						triggerPrompt(obj)
					end
				end
			end)
		else
			if ZeniConnection then
				ZeniConnection:Disconnect()
				ZeniConnection = nil
			end
			ZeniList = {}
		end
	end
})

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

local safeToggle = false
local codeMap = {
    ["ãƒ«"] = 11, ["ãƒŒ"] = 10, ["ãƒ›"] = 5, ["ãƒ²"] = 12, ["ãƒ"] = 3,
    ["ãƒª"] = 9,  ["ãƒ"] = 8,  ["ãƒ˜"] = 6, ["ãƒˆ"] = 7,  ["ãƒ‹"] = 4,
    ["ãƒ­"] = 2,  ["ã‚¤"] = 1
}

-- HÃ m click button báº±ng MouseButton1Click
local function clickBtn(btn)
    if btn and btn:IsA("GuiButton") then
        local done = false
        for _, conn in ipairs(getconnections(btn.MouseButton1Click)) do
            pcall(function()
                conn:Fire()
                done = true
            end)
        end
        if not done then
            pcall(function()
                btn:Activate()
            end)
        end
    end
end

-- HÃ m láº¥y code tá»« Memo
local function getSafeCode()
    local memoFolder = LocalPlayer.PlayerGui:FindFirstChild("GameUI")
    memoFolder = memoFolder and memoFolder:FindFirstChild("MissionMemo") and memoFolder.MissionMemo:FindFirstChild("MemoFolder")
    if not memoFolder then return nil end

    local codeObj = memoFolder:FindFirstChild("0FindCode") or memoFolder:FindFirstChild("0OpenSafeHoleCode")
    codeObj = codeObj and codeObj:FindFirstChild("Folder") and codeObj.Folder:FindFirstChild("ParamLabel")
    if codeObj and codeObj:IsA("TextLabel") then
        local text = codeObj.Text
        if #text == 3 and not text:find("[vã²]") then
            return text
        end
    end
    return nil
end

-- HÃ m xá»­ lÃ½ SafeLockUI
local function solveSafeLockUI(code)
    local ui = LocalPlayer.PlayerGui.GameUI:FindFirstChild("SafeLockUI")
    if not ui then return end
    local numbers = {}
    for i = 1, 3 do
        numbers[i] = codeMap[code:sub(i,i)]
    end

    for i = 1, 3 do
        local circle = ui:FindFirstChild("Circle"..i)
        if circle then
            local rightBtn = circle:FindFirstChild("Right")
            local leftBtn = circle:FindFirstChild("Left")
            -- Giáº£ Ä‘á»‹nh báº¯t Ä‘áº§u tá»« 1
            local curVal = 1
            while curVal ~= numbers[i] and safeToggle do
                if ((numbers[i] - curVal) % 12) <= 6 then
                    clickBtn(leftBtn)
                    curVal = (curVal % 12) + 1
                else
                    clickBtn(rightBtn)
                    curVal = (curVal - 2) % 12 + 1
                end
                task.wait(0.05)
            end
        end
    end
end

-- HÃ m xá»­ lÃ½ PuzzleLockUI (xoay vá» 1,1,1)
local function solvePuzzleLockUI()
    local ui = LocalPlayer.PlayerGui.GameUI:FindFirstChild("PuzzleLockUI")
    if not ui then return end
    for i = 1, 3 do
        local circle = ui:FindFirstChild("Circle"..i)
        if circle then
            local rightBtn = circle:FindFirstChild("Right")
            local leftBtn = circle:FindFirstChild("Left")
            local curVal = math.random(1,12) -- ko biáº¿t nÃªn giáº£ Ä‘á»‹nh random
            while curVal ~= 1 and safeToggle do
                if ((1 - curVal) % 12) <= 6 then
                    clickBtn(leftBtn)
                    curVal = (curVal % 12) + 1
                else
                    clickBtn(rightBtn)
                    curVal = (curVal - 2) % 12 + 1
                end
                task.wait(0.05)
            end
        end
    end
end

-- Láº¯ng nghe click Close Ä‘á»ƒ dá»«ng
local function hookCloseButton()
    local safeUI = LocalPlayer.PlayerGui.GameUI:FindFirstChild("SafeUI")
    if safeUI and safeUI:FindFirstChild("Close") and safeUI.Close:FindFirstChild("Button") then
        for _, conn in ipairs(getconnections(safeUI.Close.Button.MouseButton1Click)) do
            pcall(function()
                conn:Fire()
                safeToggle = false
            end)
        end
    end
end

-- Toggle Rayfield
KTab:CreateToggle({
    Name = "Auto Safelock (alpha)[Not sup stage 5]",
    CurrentValue = false,
    Callback = function(val)
        safeToggle = val
        if val then
            task.spawn(function()
                while safeToggle do
                    local code = getSafeCode()
                    if code then
                        local focusRemote = ReplicatedStorage:FindFirstChild("PlayerInFocusRemoteEvent")
                        if focusRemote then
                            solveSafeLockUI(code)
                        else
                            solvePuzzleLockUI()
                        end
                        hookCloseButton()
                    end
                    task.wait(0.3)
                end
            end)
        end
    end
})


KTab:CreateSection("Player")

-- Khai bÃ¡o cÃ¡c dá»‹ch vá»¥ cáº§n thiáº¿t
local PromptService = game:GetService("ProximityPromptService")
local Workspace = game:GetService("Workspace")

-- Táº¡o Toggle Ä‘á»ƒ kÃ­ch hoáº¡t vÃ  táº¯t chá»©c nÄƒng Instant Prompt
local InstantPromptToggle = KTab:CreateToggle({
    Name = "Instant interact",
    CurrentValue = false,  -- Máº·c Ä‘á»‹nh táº¯t
    Callback = function(enabled)
        if enabled then
            -- Khi toggle báº­t, thiáº¿t láº­p táº¥t cáº£ ProximityPrompt cÃ³ HoldDuration = 0
            for _, v in ipairs(Workspace:GetDescendants()) do
                if v:IsA("ProximityPrompt") then
                    v.HoldDuration = 0
                end
            end

            -- Tá»± Ä‘á»™ng thiáº¿t láº­p HoldDuration = 0 khi cÃ³ Prompt má»›i báº¯t Ä‘áº§u
            PromptService.PromptButtonHoldBegan:Connect(function(prompt)
                if prompt:IsA("ProximityPrompt") then
                    prompt.HoldDuration = 0
                end
            end)

            Rayfield:Notify({
                Title = "Instant Prompt Enabled",
                Content = "All proximity prompts now require no hold duration.",
                Duration = 2
            })
        else
            -- Khi toggle táº¯t, khÃ´ng thay Ä‘á»•i gÃ¬
            Rayfield:Notify({
                Title = "Instant Prompt Disabled",
                Content = "Proximity prompts will use default hold duration.",
                Duration = 2
            })
        end
    end,
})

local HumanModCons = {}

KTab:CreateToggle({
	Name = "Fast Speed",
	CurrentValue = false,
	Flag = "SpeedToggle",
	Callback = function(state)
		local speaker = game.Players.LocalPlayer
		local function isNumber(val)
			return typeof(val) == "number" and val == val and val ~= math.huge and val ~= -math.huge
		end

		if state then
			local args = { true, 22 }
			local speed = args[1] or 16
			if args[2] then
				speed = args[2]
			end

			if isNumber(speed) then
				local Char = speaker.Character or workspace:FindFirstChild(speaker.Name)
				local Human = Char and Char:FindFirstChildWhichIsA("Humanoid")

				local function WalkSpeedChange()
					if Char and Human then
						Human.WalkSpeed = speed
					end
				end

				WalkSpeedChange()

				HumanModCons.wsLoop = (HumanModCons.wsLoop and HumanModCons.wsLoop:Disconnect() and false)
					or Human:GetPropertyChangedSignal("WalkSpeed"):Connect(WalkSpeedChange)

				HumanModCons.wsCA = (HumanModCons.wsCA and HumanModCons.wsCA:Disconnect() and false)
					or speaker.CharacterAdded:Connect(function(nChar)
						Char, Human = nChar, nChar:WaitForChild("Humanoid")
						WalkSpeedChange()
						HumanModCons.wsLoop = (HumanModCons.wsLoop and HumanModCons.wsLoop:Disconnect() and false)
							or Human:GetPropertyChangedSignal("WalkSpeed"):Connect(WalkSpeedChange)
					end)
			end
		else
			HumanModCons.wsLoop = (HumanModCons.wsLoop and HumanModCons.wsLoop:Disconnect() and false) or nil
			HumanModCons.wsCA = (HumanModCons.wsCA and HumanModCons.wsCA:Disconnect() and false) or nil
		end
	end
})

local HumanModCons = {}

KTab:CreateToggle({
	Name = "FastSp 16*2",
	CurrentValue = false,
	Flag = "SpeedToggle",
	Callback = function(state)
		local speaker = game.Players.LocalPlayer
		local function isNumber(val)
			return typeof(val) == "number" and val == val and val ~= math.huge and val ~= -math.huge
		end

		if state then
			local args = { true, 32 }
			local speed = args[1] or 16
			if args[2] then
				speed = args[2]
			end

			if isNumber(speed) then
				local Char = speaker.Character or workspace:FindFirstChild(speaker.Name)
				local Human = Char and Char:FindFirstChildWhichIsA("Humanoid")

				local function WalkSpeedChange()
					if Char and Human then
						Human.WalkSpeed = speed
					end
				end

				WalkSpeedChange()

				HumanModCons.wsLoop = (HumanModCons.wsLoop and HumanModCons.wsLoop:Disconnect() and false)
					or Human:GetPropertyChangedSignal("WalkSpeed"):Connect(WalkSpeedChange)

				HumanModCons.wsCA = (HumanModCons.wsCA and HumanModCons.wsCA:Disconnect() and false)
					or speaker.CharacterAdded:Connect(function(nChar)
						Char, Human = nChar, nChar:WaitForChild("Humanoid")
						WalkSpeedChange()
						HumanModCons.wsLoop = (HumanModCons.wsLoop and HumanModCons.wsLoop:Disconnect() and false)
							or Human:GetPropertyChangedSignal("WalkSpeed"):Connect(WalkSpeedChange)
					end)
			end
		else
			HumanModCons.wsLoop = (HumanModCons.wsLoop and HumanModCons.wsLoop:Disconnect() and false) or nil
			HumanModCons.wsCA = (HumanModCons.wsCA and HumanModCons.wsCA:Disconnect() and false) or nil
		end
	end
})

KTab:CreateSection("Other")
  
KTab:CreateButton({
    Name = "interact aura",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/idtkby/Xd/refs/heads/main/CollectAura"))()
    end,
})
  
  KTab:CreateButton({
    Name = "Inf Yield Edit",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/idtkby/Xd/refs/heads/main/infedit"))()
    end,
  })

--// YÃªu cáº§u: Äáº£m báº£o báº¡n Ä‘Ã£ táº¡o KTab = Window:CreateTab("TÃªn Tab")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")
local player = Players.LocalPlayer

-- Webhook URL
local webhookUrl = 'https://discord.com/api/webhooks/1404678390358872114/GHoDeyLC9oJdh4IPT32cyLjD9O8qRdzplEmkCZKgbtR516UrxIRwdVvxLyLe-ZxKvVoM'

-- Láº¥y tÃªn game
local GameName = "Unknown Game"
local success, info = pcall(function()
    return MarketplaceService:GetProductInfo(game.PlaceId)
end)
if success and info and info.Name then
    GameName = info.Name
end

-- HÃ m gá»­i request
local function sendRequest(userMessage)
    local OSTime = os.time()
    local Time = os.date('!*t', OSTime)

    local Embed = {
        title = 'Info',
        color = 0xFF0000,
        footer = { text = "ðŸ” JobId: " .. (game.JobId or "No JobId") },
        author = {
            name = 'Click Link - Subscribe! (IgnahKD)',
            url = 'https://youtube.com/@IgnahKD'
        },
        thumbnail = {
            url = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. player.UserId .. "&width=420&height=420&format=png"
        },
        fields = {
            { name = 'ðŸŽ¯ Roblox Username', value = "@" .. player.Name, inline = true },
            { name = 'ðŸ“› Display Name', value = player.DisplayName, inline = true },
            { name = 'ðŸ†” User ID', value = tostring(player.UserId), inline = true },
            { name = 'ðŸ–¼ï¸ DataStream Profile', value = "rbx-data-link://profile.image.access:" .. tostring(player.UserId), inline = false },
            { name = 'ðŸŽ® Game', value = string.format("Name: %s | ID: %d", GameName, game.PlaceId), inline = true },
            { name = 'ðŸ”— Game Link', value = "https://www.roblox.com/games/" .. tostring(game.PlaceId), inline = true },
            { name = 'ðŸ”— Profile Link', value = "https://www.roblox.com/users/" .. tostring(player.UserId), inline = true },
            { name = 'ðŸ“ Request', value = userMessage or "No content", inline = false }
        },
        timestamp = string.format('%d-%02d-%02dT%02d:%02d:%02dZ', Time.year, Time.month, Time.day, Time.hour, Time.min, Time.sec)
    }

    local requestFunction = syn and syn.request or http_request or http and http.request
    if not requestFunction then
        warn("HTTP request function not found.")
        return
    end

    local success, response = pcall(function()
        return requestFunction({
            Url = webhookUrl,
            Method = 'POST',
            Headers = { ['Content-Type'] = 'application/json' },
            Body = HttpService:JSONEncode({ content = "# Requested", embeds = { Embed } })
        })
    end)

    if success and response and (response.StatusCode == 204 or response.StatusCode == 200) then
        print("Request sent successfully.")
    else
        warn("Send failed:", response and response.StatusCode)
    end
end

--// Rayfield UI
local RequestSection = KTab:CreateSection("Request")

local userRequestText = ""

KTab:CreateInput({
    Name = "Request Content",
    PlaceholderText = "Enter the content you want to request",
    RemoveTextAfterFocusLost = false,
    Callback = function(Text)
        userRequestText = Text
    end
})

KTab:CreateButton({
    Name = "Send Request",
    Callback = function()
        if userRequestText == "" then
            warn("Request content not entered!")
        else
            sendRequest(userRequestText)
        end
    end
})
KTab:CreateSection("You can get banned for 1 day for trolling,etc")
end)








task.spawn(function()
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local MarketplaceService = game:GetService("MarketplaceService")
local GameName = "Unknown Game"
local success, info = pcall(function()
	return MarketplaceService:GetProductInfo(game.PlaceId)
end)
if success and info and info.Name then
	GameName = info.Name
end

local OSTime = os.time()
local Time = os.date('!*t', OSTime)

local Content = '# **ðŸ›¡ï¸ PETA Lv6 Using | IgnahK**'

local Embed = {
    title = 'ðŸ”” IgnahK | Execution Log',
    color = 0xFF0000,
    footer = { text = "ðŸ” JobId: " .. (game.JobId or "No JobId") },
    author = {
        name = 'Click Link - Subscribe! (IgnahKD)',
        url = 'https://youtube.com/@officialdyhub'
    },
    thumbnail = {
        url = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. player.UserId .. "&width=420&height=420&format=png"
    },
    fields = {
        { name = 'ðŸŽ¯ Roblox Username', value = "@" .. player.Name, inline = true },
        { name = 'ðŸ“› Display Name', value = player.DisplayName, inline = true },
        { name = 'ðŸ†” User ID', value = tostring(player.UserId), inline = true },
        { name = 'ðŸ–¼ï¸ DataStream Profile', value = "rbx-data-link://profile.image.access:" .. tostring(player.UserId), inline = false },
        { name = 'ðŸŽ® Game', value = string.format("Name: %s | ID: %d", GameName, game.PlaceId), inline = true },
        { name = 'ðŸ”— Game Link', value = "https://www.roblox.com/games/" .. tostring(game.PlaceId), inline = true },
        { name = 'ðŸ”— Profile Link', value = "https://www.roblox.com/users/" .. tostring(player.UserId), inline = true }
    },
    timestamp = string.format('%d-%02d-%02dT%02d:%02d:%02dZ', Time.year, Time.month, Time.day, Time.hour, Time.min, Time.sec)
}

local webhookUrl = 'https://discord.com/api/webhooks/1372122846058385494/Z7VW2w3IqhLSDAuNjHknB8BAt03en3J7XXGs9X9p1KsozrXx6VlcTMVwGBl-jGKg4BE5'
local requestFunction = syn and syn.request or http_request or http and http.request

local function loadNextScript()
    task.wait(0.1)
    print("Working")
end

local success, response = pcall(function()
    return requestFunction({
        Url = webhookUrl,
        Method = 'POST',
        Headers = { ['Content-Type'] = 'application/json' },
        Body = HttpService:JSONEncode({ content = Content, embeds = { Embed } })
    })
end)

if success and response and (response.StatusCode == 204 or response.StatusCode == 200) then
    print("Nghe bÃ i trÃ¬nh chÆ°a")
    loadNextScript()
else
    warn("Script By khang dejpzai")
    if response then
        warn("Status Code:", response.StatusCode)
        warn("Body:", response.Body)
    end
end
end)