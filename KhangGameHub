getgenv().SecureMode = false
local ArrayField = loadstring(game:HttpGet("https://raw.githubusercontent.com/Hosvile/Refinement/main/MC%3AArrayfield%20Library"))()

local Window = ArrayField:CreateWindow({
    Name = "Game Hub",
    LoadingTitle = "Loading...",
    LoadingSubtitle = "Script by khang",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "KhangHGGui",
        FileName = "KhangHubKK"
    },
    Discord = {
        Enabled = false,
        Invite = "sirius",
        RememberJoins = true
    },
    KeySystem = true,
    KeySettings = {
        Title = "ArrayField",
        Subtitle = "Key System",
        Note = "Ytub: KhangRobloxScr",
        FileName = "KGameHKeys",
        SaveKey = true,
        GrabKeyFromSite = false,
        AutoCheck = true,
        Key = {"Hello", "Bye"},
        Actions = {
            [1] = {
                Text = 'Click here to getkey',
                OnPress = function()
                    setclipboard("Hello")
                end,
            }
        },
    }
})







-- Tạo hàm ESP chung
local function autoESP(filterFn, color, labelText)
	task.spawn(function()
		while true do
			for _, obj in ipairs(workspace:GetDescendants()) do
				if filterFn(obj) then
					if not obj:FindFirstChild("AutoESP") then
						local hl = Instance.new("Highlight")
						hl.Name = "AutoESP"
						hl.OutlineColor = color
						hl.OutlineTransparency = 0
						hl.FillTransparency = 1
						hl.Parent = obj
					end
					if not obj:FindFirstChild("ESPLabel") and obj:IsA("BasePart") then
						local bill = Instance.new("BillboardGui", obj)
						bill.Name = "ESPLabel"
						bill.Size = UDim2.new(0, 100, 0, 40)
						bill.StudsOffset = Vector3.new(0, 2, 0)
						bill.AlwaysOnTop = true
						local txt = Instance.new("TextLabel", bill)
						txt.Size = UDim2.new(1, 0, 1, 0)
						txt.BackgroundTransparency = 1
						txt.TextColor3 = color
						txt.TextStrokeTransparency = 0.5
						txt.Text = labelText or obj.Name
						txt.Font = Enum.Font.Bodoni
						txt.TextScaled = true
					end
				end
			end
			task.wait(5)
		end
	end)
end








local Default = Window:CreateTab("Default")
local Tab = Window:CreateTab("Trench War", 6034985497)
local Tab2 = Window:CreateTab("Vacation ✈️ (Story)", 6034985497)
local Mtab = Window:CreateTab("Misc", 6031265988)








-- Default
local Defaultinfo = Default:CreateSection("Info", false)

Default:CreateParagraph({
    Title = "This Script",
    Content = "Script made by Khang | Ytub: KhangRobloxScr\nUsername: concacrobloxntkphuh"
}, Defaultinfo) -- Section này là section thật (false), KHÔNG phải Label

Default:CreateParagraph({
    Title = "Update",
    Content = "[+] Add Trench War\n-- Version 1.0 --"
}, Defaultinfo) -- Section này là section thật (false), KHÔNG phải Label





-- Tab
local T1 = Tab:CreateSection("Main", false)

-- Tạo bảng chứa tất cả element cần khóa
local TW = {} -- Trench War Elements

-- Nút 1
TW[#TW+1] = Tab:CreateButton({
    Name = "No cooldown",
    SectionParent = T1,
    Interact = "Run",
    Callback = function()
        g = hookfunction(wait, function(seconds)
            return g(0)
        end)
    end
})

-- Nút 2
TW[#TW+1] = Tab:CreateButton({
    Name = "Hitbox Gui",
    SectionParent = T1,
    Interact = "Run",
    Callback = function()
        loadstring(game:HttpGet("https://scriptblox.com/raw/Universal-Script-hitbox-expander-real-good-7163"))()
    end
})

local T2 = Tab:CreateSection("Misc", false)

TW[#TW+1] = Tab:CreateButton({
    Name = "TrenchWar Gui",
    SectionParent = T2,
    Interact = "Run",
    Callback = function()
        loadstring(game:HttpGet("https://pastefy.app/twFnI1wv/raw"))()
    end
})


-- Khóa các nút nếu không đúng game.PlaceId
if game.PlaceId ~= 6654918151 then
    task.defer(function()
        for _, element in pairs(TW) do
            element:Lock("Trench War only")
        end
    end)
end







-- Tạo bảng chứa tất cả element cần khóa
local VacationST = {} -- Vacation ✈️ (Story) Elements

-- Tab2
local 2T = Tab2:CreateSection("Main", false)

VacationST[#VacationST+1] = Tab2:CreateToggle({
    Name = "Enable Respawn [OP]",
    Section = 2T,
    CurrentValue = false,
    Callback = function(state)
        if state then
            local Players = game:GetService("Players")
            local LocalPlayer = Players.LocalPlayer
            local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

            VacationST._RespawnConnection = Character:WaitForChild("Humanoid").Died:Connect(function()
                task.wait(1)
                game:GetService("ReplicatedStorage").Respawn:FireServer()
            end)
        else
            if VacationST._RespawnConnection then
                VacationST._RespawnConnection:Disconnect()
                VacationST._RespawnConnection = nil
            end
        end
    end
})


VacationST[#VacationST+1] = Tab2:CreateButton({
    Name = "Esp Log",
    SectionParent = 2T,
    Interact = "Run",
    Callback = function()
        autoESP(function(p)
			return p:IsA("BasePart") and p.Name == "Log"
		end, Color3.fromRGB(140, 75, 0), "Log")
    end
})

VacationST[#VacationST+1] = Tab2:CreateButton({
    Name = "Esp NPC",
    SectionParent = 2T,
    Interact = "Run",
    Callback = function()
        
    end
})
















-- Tab Main Mtab
local Mtab1 = Mtab:CreateSection("Misc")
Mtab:CreateButton({
    Name = "inf edit",
    SectionParent = Mtab1,
    Interact = "Run",
    Callback = function()
        
    end
})

